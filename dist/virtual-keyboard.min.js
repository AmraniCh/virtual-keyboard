var Keyboard=function(e){e&&"object"!=typeof e&&console.error("Keybaord accept an object of supprted keybaord options.");var t={fr:[[1,2,3,4,5,6,7,8,9,0,{8:"backspace"}],["q","w","e","r","t","y","u","i","o","p"],[{20:"caps"},"a","s","d","f","g","h","j","k","l",{13:"enter"}],[{done:"done"},"z","x","c","v","b","n","m",",",".","?"],[{32:"space"}]]},n=Object.keys(t),s={lang:"fr",charsOnly:!1,caps:!1},l={container:null,keysContainer:null,keyboardInput:null,clientInput:null};e.lang&&-1===n.indexOf(e.lang)&&console.error(lang+" language is not supported!"),Object.assign(s,e);var p=function(e){if(!(this instanceof p))return new p(e);var n,t;if(this.length=0,"string"==typeof e&&(n=this,t=document.querySelectorAll(e),this.length=t.length,t.forEach(function(e,t){n[t]=e})),(e instanceof Node||e===window)&&(this[0]=e),e.constructor&&"Array"===e.constructor.name)for(var a=e,o=a.length-1;0<=o;)this[o]=a[o],this.length++,o--;p.prototype.length=0,p.prototype.addClass=function(e){var t=this;return e.split(" ").forEach(function(e){t[0].classList.add(e)}),this},p.prototype.removeClass=function(e){var t=this;return e.split(" ").forEach(function(e){t[0].classList.remove(e)}),this},p.prototype.appendTo=function(e){return document.querySelector(e).appendChild(this[0]),this},p.prototype.get=function(e){return this[0]},p.prototype.setAttribute=function(e,t){return this[0].setAttribute(e,t),this},p.prototype.text=function(e){return this[0].textContent=e,this},p.prototype.on=function(e,t){return this[0].addEventListener(e,t),this},p.prototype.splice=Array.prototype.splice,p.prototype.each=Array.prototype.forEach};function a(e){var r,i=e.charsOnly,c=e.caps,d=(l.container=p.create("div").addClass("keyboard keyboard--hidden").appendTo("body").get(0),l.keysContainer=p.create("div").addClass("keyboard__keys").appendTo(".keyboard").get(0)),e=l.keyboardInput=p.create("input").addClass("keyboard__input").get(0);d.insertBefore(e,d.firstElementChild),p.create("br").appendTo(".keyboard__keys"),r=function(e){var t=arguments[arguments.length-1];if("object"==typeof e)for(var n in e)switch(n){case"8":var a=p.create("button").addClass("keyboard__key keyboard__key--wide").setAttribute("type","button").get(0),o=p.create("i").addClass("icon material-icons").text("backspace").get(0);a.appendChild(o),d.appendChild(a),p(a).on("click",function(){l.keyboardInput.value=l.keyboardInput.value.slice(0,-1),l.clientInput.value=l.clientInput.value.slice(0,-1)});break;case"20":a=p.create("button").addClass("keyboard__key keyboard__key--wide keyboard__key--activatable").setAttribute("type","button").get(0),o=p.create("i").addClass("icon material-icons").text("keyboard_capslock").get(0);a.appendChild(o),d.appendChild(a),c&&(p(a).addClass("keyboard__key--active"),u()),p(a).on("click",function(){s.caps=!s.caps,this.classList.toggle("keyboard__key--active"),u()});break;case"13":a=p.create("button").addClass("keyboard__key keyboard__key--wide").setAttribute("type","button").get(0),o=p.create("i").addClass("icon material-icons").text("keyboard_return").get(0);a.appendChild(o),d.appendChild(a);break;case"done":a=p.create("button").addClass("keyboard__key keyboard__key--wide keyboard__key--dark").setAttribute("type","button").get(0),o=p.create("i").addClass("icon material-icons").text("check_circle").get(0);a.appendChild(o),d.appendChild(a),p(a).on("click",y);break;case"32":a=p.create("button").addClass("keyboard__key keyboard__key--extra-wide").setAttribute("type","button").get(0),o=p.create("i").addClass("icon material-icons").text("space_bar").get(0);a.appendChild(o),d.appendChild(a),p(a).on("click",function(){l.keyboardInput.value+=" "})}else{if(!0===i&&"number"==typeof e)return;a=p.create("button").addClass("keyboard__key").setAttribute("type","button").text(e).get(0);d.appendChild(a),p(a).on("click",function(){l.keyboardInput.value+=a.textContent,l.clientInput.value+=a.textContent})}t&&d.appendChild(document.createElement("br"))},p(t[s.lang]).each(function(a,o){p(a).each(function(e,t){var n=t===a.length-1;r.apply(this,[e,o,t,n])})})}function u(){p("button.keyboard__key").each(function(e){0===e.childElementCount&&(!0===s.caps?e.textContent=e.textContent.toUpperCase():e.textContent=e.textContent.toLowerCase())})}function y(){l.clientInput.value=l.keyboardInput.value,p(l.container).addClass("keyboard--hidden")}function o(){p("input:not(.keyboard__input), textarea").each(function(e){p(e).on("focus",function(e){e=e.target;e.readOnly||(p(l.container).removeClass("keyboard--hidden"),l.clientInput=e,e={placeholder:e.placeholder,value:e.value},l.keyboardInput.placeholder=e.placeholder,l.keyboardInput.value=e.value)})}),p(window).on("click",function(e){l.container.classList.contains("keyboard--hidden")||e.target!==l.keyboardInput&&-1===["input","textarea"].indexOf(e.target.tagName.toLowerCase())&&e.target.closest(".keyboard")!==l.container&&(p(l.container).addClass("keyboard--hidden"),y())}),p(".keyboard__input").on("input",function(){l.clientInput.value=this.value})}return p.create=function(e){e=document.createElement(e);return p(e)},{init:function(){a({charsOnly:s.charsOnly,caps:s.caps}),s.caps&&u(),o()}}};