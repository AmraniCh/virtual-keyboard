var Keyboard=function(e){e&&"object"!=typeof e&&console.error("Keybaord accept an object of supprted keybaord options.");var t={fr:[[1,2,3,4,5,6,7,8,9,0,{8:"backspace"}],["q","w","e","r","t","y","u","i","o","p"],[{20:"caps"},"a","s","d","f","g","h","j","k","l",{13:"enter"}],[{done:"done"},"z","x","c","v","b","n","m",",",".","?"],[{lang:"lang"},{32:"space"}]],ar:[[1,2,3,4,5,6,7,8,9,0,{8:"backspace"}],["ض","ص","ث","ق","ف","غ","ع","ه","خ","ح"],[{20:"caps"},"ش","س","ي","ب","ل","ا","ت","ن","م",{13:"enter"}],[{done:"done"},"ئ","ء","ؤ","ر","لا","ى","ة",",",".","?"],[{lang:"lang"},{32:"space"}]]},u=Object.keys(t),y={lang:"fr",charsOnly:!1,caps:!1},k={container:null,keysContainer:null,keyboardInput:null,clientInput:null};e.lang&&-1===u.indexOf(e.lang)&&console.error(lang+" language is not supported!"),Object.assign(y,e);var b=function(e){if(!(this instanceof b))return new b(e);var a,t;if(this.length=0,"string"==typeof e&&(a=this,t=document.querySelectorAll(e),this.length=t.length,t.forEach(function(e,t){a[t]=e})),(e instanceof Node||e===window)&&(this[0]=e),e.constructor&&"Array"===e.constructor.name)for(var n=e,o=n.length-1;0<=o;)this[o]=n[o],this.length++,o--;b.prototype.length=0,b.prototype.addClass=function(e){var t=this;return e.split(" ").forEach(function(e){t[0].classList.add(e)}),this},b.prototype.removeClass=function(e){var t=this;return e.split(" ").forEach(function(e){t[0].classList.remove(e)}),this},b.prototype.toggle=function(e){return this[0].classList.toggle(e)},b.prototype.contains=function(e){return this[0].classList.contains(e)},b.prototype.appendTo=function(e){return document.querySelector(e).appendChild(this[0]),this},b.prototype.get=function(e){return this[0]},b.prototype.setAttribute=function(e,t){return this[0].setAttribute(e,t),this},b.prototype.text=function(e){return this[0].textContent=e,this},b.prototype.on=function(e,t){return this[0].addEventListener(e,t),this},b.prototype.splice=Array.prototype.splice,b.prototype.each=Array.prototype.forEach};function a(e){var s=e.charsOnly,l=e.caps,p=(k.container=b.create("div").addClass("keyboard keyboard--hidden").appendTo("body").get(0),k.keysContainer=b.create("div").addClass("keyboard__keys").appendTo(".keyboard").get(0)),e=k.keyboardInput=b.create("input").addClass("keyboard__input").get(0);p.insertBefore(e,p.firstElementChild),b.create("br").appendTo(".keyboard__keys"),h(y.lang,function(e){var t=arguments[arguments.length-1];if("object"==typeof e)for(var a in e)switch(a){case"8":var n=b.create("button").addClass("keyboard__key keyboard__key--wide").setAttribute("type","button").get(0),o=b.create("i").addClass("icon material-icons").text("backspace").get(0);n.appendChild(o),p.appendChild(n),b(n).on("click",function(){k.keyboardInput.value=k.keyboardInput.value.slice(0,-1),k.clientInput.value=k.clientInput.value.slice(0,-1)});break;case"20":n=b.create("button").addClass("keyboard__key keyboard__key--wide keyboard__key--activatable").setAttribute("type","button").get(0),o=b.create("i").addClass("icon material-icons").text("keyboard_capslock").get(0);n.appendChild(o),p.appendChild(n),l&&(b(n).addClass("keyboard__key--active"),f()),b(n).on("click",function(){y.caps=!y.caps,this.classList.toggle("keyboard__key--active"),f()});break;case"13":n=b.create("button").addClass("keyboard__key keyboard__key--wide").setAttribute("type","button").get(0),o=b.create("i").addClass("icon material-icons").text("keyboard_return").get(0);n.appendChild(o),p.appendChild(n);break;case"done":n=b.create("button").addClass("keyboard__key keyboard__key--wide keyboard__key--dark").setAttribute("type","button").get(0),o=b.create("i").addClass("icon material-icons").text("check_circle").get(0);n.appendChild(o),p.appendChild(n),b(n).on("click",g);break;case"lang":n=b.create("button").addClass("keyboard__key keyboard__key--wide keyboard__key--dark keyboard__langauge__dropdown").setAttribute("type","button").get(0),o=b.create("i").addClass("icon material-icons").text("language").get(0);n.appendChild(o),p.appendChild(n);var r=b.create("ul").addClass("languages__list").get(0);b(r).on("click",function(e){e.stopPropagation(),e.preventDefault()});for(var i=[],c=0;c<u.length;c++){var d=u[c],d=b.create("li").addClass("language__item").setAttribute("data-lang",d).text(d).get(0);r.appendChild(d),i.push(d)}n.appendChild(r),b(n).on("click",function(){b(r).toggle("show")}),b(i).each(function(e){b(e).on("click",function(){b(r).removeClass("show"),function(e){if(-1===u.indexOf(e))return;var o=b(".keyboard__key:not(.keyboard__key--wide):not(.keyboard__key--extra-wide)"),r=0;h(e,function(e,t,a,n){"object"!=typeof e&&(b(o[r]).text(e+""),r++)})}(this.dataset.lang)})});break;case"32":n=b.create("button").addClass("keyboard__key keyboard__key--extra-wide").setAttribute("type","button").get(0),o=b.create("i").addClass("icon material-icons").text("space_bar").get(0);n.appendChild(o),p.appendChild(n),b(n).on("click",function(){k.keyboardInput.value+=" "})}else{if(!0===s&&"number"==typeof e)return;n=b.create("button").addClass("keyboard__key").setAttribute("type","button").text(e).get(0);p.appendChild(n),b(n).on("click",function(){k.keyboardInput.value+=n.textContent,k.clientInput.value+=n.textContent})}t&&p.appendChild(document.createElement("br"))})}function h(e,r){b(t[e]).each(function(n,o){b(n).each(function(e,t){var a=t===n.length-1;r.apply(this,[e,o,t,a])})})}function f(){b("button.keyboard__key").each(function(e){0===e.childElementCount&&(!0===y.caps?e.textContent=e.textContent.toUpperCase():e.textContent=e.textContent.toLowerCase())})}function g(){k.clientInput.value=k.keyboardInput.value,b(k.container).addClass("keyboard--hidden")}function n(){b("input:not(.keyboard__input), textarea").each(function(e){b(e).on("focus",function(e){e=e.target;e.readOnly||(b(k.container).removeClass("keyboard--hidden"),k.clientInput=e,e={placeholder:e.placeholder,value:e.value},k.keyboardInput.placeholder=e.placeholder,k.keyboardInput.value=e.value)})}),b(window).on("click",function(e){b(k.container).contains("keyboard--hidden")||e.target!==k.keyboardInput&&-1===["input","textarea"].indexOf(e.target.tagName.toLowerCase())&&e.target.closest(".keyboard")!==k.container&&(b(k.container).addClass("keyboard--hidden"),b(".languages__list").removeClass("show"),g())}),b(".keyboard__input").on("input",function(){k.clientInput.value=this.value})}return b.create=function(e){e=document.createElement(e);return b(e)},{init:function(){a({charsOnly:y.charsOnly,caps:y.caps}),y.caps&&f(),n()}}};