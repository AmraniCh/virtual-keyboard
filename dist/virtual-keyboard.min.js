var Keyboard=function(e){e&&"object"!=typeof e&&console.error("Keybaord accept an object of supprted keybaord options.");var t={fr:[[1,2,3,4,5,6,7,8,9,0,{8:"backspace"}],["q","w","e","r","t","y","u","i","o","p"],[{20:"caps"},"a","s","d","f","g","h","j","k","l",{13:"enter"}],[{done:"done"},"z","x","c","v","b","n","m",",",".","?"],[{lang:"lang"},{32:"space"}]],ar:[[1,2,3,4,5,6,7,8,9,0,{8:"backspace"}],["ض","ص","ث","ق","ف","غ","ع","ه","خ","ح"],[{20:"caps"},"ش","س","ي","ب","ل","ا","ت","ن","م",{13:"enter"}],[{done:"done"},"ئ","ء","ؤ","ر","لا","ى","ة",",",".","?"],[{lang:"lang"},{32:"space"}]]},u=Object.keys(t),y=["ar"],b={lang:"fr",charsOnly:!1,caps:!1},k={container:null,keysContainer:null,keyboardInput:null,clientInput:null};e.lang&&-1===u.indexOf(e.lang)&&console.error(lang+" language is not supported!"),Object.assign(b,e);var h=function(e){if(!(this instanceof h))return new h(e);var a,t;if(this.length=0,"string"==typeof e&&(a=this,t=document.querySelectorAll(e),this.length=t.length,t.forEach(function(e,t){a[t]=e})),(e instanceof Node||e===window)&&(this[0]=e),e.constructor&&"Array"===e.constructor.name)for(var n=e,o=n.length-1;0<=o;)this[o]=n[o],this.length++,o--;h.prototype.length=0,h.prototype.addClass=function(e){var t=this;return e.split(" ").forEach(function(e){t[0].classList.add(e)}),this},h.prototype.removeClass=function(e){var t=this;return e.split(" ").forEach(function(e){t[0].classList.remove(e)}),this},h.prototype.toggle=function(e){return this[0].classList.toggle(e)},h.prototype.contains=function(e){return this[0].classList.contains(e)},h.prototype.appendTo=function(e){return document.querySelector(e).appendChild(this[0]),this},h.prototype.get=function(e){return this[0]},h.prototype.setAttribute=function(e,t){return this[0].setAttribute(e,t),this},h.prototype.text=function(e){return this[0].textContent=e,this},h.prototype.on=function(e,t){return this[0].addEventListener(e,t),this},h.prototype.splice=Array.prototype.splice,h.prototype.each=Array.prototype.forEach};function a(e){var s=e.charsOnly,l=e.caps,p=(k.container=h.create("div").addClass("keyboard keyboard--hidden").appendTo("body").get(0),k.keysContainer=h.create("div").addClass("keyboard__keys").appendTo(".keyboard").get(0)),e=k.keyboardInput=h.create("input").addClass("keyboard__input").get(0);p.insertBefore(e,p.firstElementChild),h.create("br").appendTo(".keyboard__keys"),g(b.lang,function(e){var t=arguments[arguments.length-1];if("object"==typeof e)for(var a in e)switch(a){case"8":var n=h.create("button").addClass("keyboard__key keyboard__key--wide").setAttribute("type","button").get(0),o=h.create("i").addClass("icon material-icons").text("backspace").get(0);n.appendChild(o),p.appendChild(n),h(n).on("click",function(){k.keyboardInput.value=k.keyboardInput.value.slice(0,-1),k.clientInput.value=k.clientInput.value.slice(0,-1)});break;case"20":n=h.create("button").addClass("keyboard__key keyboard__key--wide keyboard__key--activatable").setAttribute("type","button").get(0),o=h.create("i").addClass("icon material-icons").text("keyboard_capslock").get(0);n.appendChild(o),p.appendChild(n),l&&(h(n).addClass("keyboard__key--active"),f()),h(n).on("click",function(){b.caps=!b.caps,this.classList.toggle("keyboard__key--active"),f()});break;case"13":n=h.create("button").addClass("keyboard__key keyboard__key--wide").setAttribute("type","button").get(0),o=h.create("i").addClass("icon material-icons").text("keyboard_return").get(0);n.appendChild(o),p.appendChild(n);break;case"done":n=h.create("button").addClass("keyboard__key keyboard__key--wide keyboard__key--dark").setAttribute("type","button").get(0),o=h.create("i").addClass("icon material-icons").text("check_circle").get(0);n.appendChild(o),p.appendChild(n),h(n).on("click",_);break;case"lang":n=h.create("button").addClass("keyboard__key keyboard__key--wide keyboard__key--dark keyboard__langauge__dropdown").setAttribute("type","button").get(0),o=h.create("i").addClass("icon material-icons").text("language").get(0);n.appendChild(o),p.appendChild(n);var r=h.create("ul").addClass("languages__list").get(0);h(r).on("click",function(e){e.stopPropagation(),e.preventDefault()});for(var i=[],c=0;c<u.length;c++){var d=u[c],d=h.create("li").addClass("language__item").setAttribute("data-lang",d).text(d).get(0);r.appendChild(d),i.push(d)}n.appendChild(r),h(n).on("click",function(){h(r).toggle("show")}),h(i).each(function(e){h(e).on("click",function(){h(r).removeClass("show"),function(e){if(-1===u.indexOf(e))return;var o=h(".keyboard__key:not(.keyboard__key--wide):not(.keyboard__key--extra-wide)"),r=0;g(e,function(e,t,a,n){"object"!=typeof e&&(h(o[r]).text(e+""),r++)}),b.lang=e}(this.dataset.lang)})});break;case"32":n=h.create("button").addClass("keyboard__key keyboard__key--extra-wide").setAttribute("type","button").get(0),o=h.create("i").addClass("icon material-icons").text("space_bar").get(0);n.appendChild(o),p.appendChild(n),h(n).on("click",function(){k.keyboardInput.value+=" "})}else{if(!0===s&&"number"==typeof e)return;n=h.create("button").addClass("keyboard__key").setAttribute("type","button").text(e).get(0);p.appendChild(n),h(n).on("click",function(){h(k.keyboardInput).setAttribute("dir",-1!==y.indexOf(b.lang)?"rtl":"ltr"),k.keyboardInput.value+=n.textContent,k.clientInput.value+=n.textContent})}t&&p.appendChild(document.createElement("br"))})}function g(e,r){h(t[e]).each(function(n,o){h(n).each(function(e,t){var a=t===n.length-1;r.apply(this,[e,o,t,a])})})}function f(){h("button.keyboard__key").each(function(e){0===e.childElementCount&&(!0===b.caps?e.textContent=e.textContent.toUpperCase():e.textContent=e.textContent.toLowerCase())})}function _(){k.clientInput.value=k.keyboardInput.value,h(k.container).addClass("keyboard--hidden")}function n(){h("input:not(.keyboard__input), textarea").each(function(e){h(e).on("focus",function(e){e=e.target;e.readOnly||(h(k.container).removeClass("keyboard--hidden"),k.clientInput=e,e={placeholder:e.placeholder,value:e.value},k.keyboardInput.placeholder=e.placeholder,k.keyboardInput.value=e.value)})}),h(window).on("click",function(e){h(k.container).contains("keyboard--hidden")||e.target!==k.keyboardInput&&-1===["input","textarea"].indexOf(e.target.tagName.toLowerCase())&&e.target.closest(".keyboard")!==k.container&&(h(k.container).addClass("keyboard--hidden"),h(".languages__list").removeClass("show"),_())}),h(".keyboard__input").on("input",function(){k.clientInput.value=this.value})}return h.create=function(e){e=document.createElement(e);return h(e)},{init:function(){a({charsOnly:b.charsOnly,caps:b.caps}),b.caps&&f(),n()}}};